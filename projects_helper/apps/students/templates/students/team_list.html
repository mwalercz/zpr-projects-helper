{% extends "students/base.html" %}
{% block content %}
    {% load bootstrap3 %}

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <h2>Projects</h2>
    <table class="table table-striped">
        <tr>
            <th>Join</th>
            <th>Team</th>
            <th>Assigned project</th>
            <th>Preferred project</th>
        </tr>
        {% for team in teams %}
            <tr>
                <td>
                    {% if not team.is_full and  not team.is_locked %}
                        <a href='{% url 'students:join_team' team.pk %}'>{% bootstrap_icon "ok" %}</a>
                    {% endif %}
                </td>
                <td>{{ team }}</td>
                <td>
                    {% with project_assigned=team.project_assigned %}
                        {% if project_assigned != None %}
                            <a href='{% url 'students:project' project_assigned.pk %}'> {{ project_assigned }} </a>
                        {% else %}
                            {{ project_assigned }}
                        {% endif %}
                    {% endwith %}
                </td>
                <td>
                    {% with project_preference=team.project_preference %}
                        {% if project_preference != None %}
                            <a href='{% url 'students:project' project_preference.pk %}'> {{ project_preference }} </a>
                        {% else %}
                            {{ project_preference }}
                        {% endif %}
                    {% endwith %}
                </td>
            </tr>

        {% endfor %}
    </table>
    <br/>
    <a><input type="button" value="New Team"
              onClick="window.location.href='{% url 'students:new_team' %}'"/></a>
{% endblock %}
